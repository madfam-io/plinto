name = "janua-edge-verify"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[env.production]
name = "janua-edge-verify-prod"
route = "janua.dev/api/v1/verify*"
vars = { ENVIRONMENT = "production" }

[env.staging]
name = "janua-edge-verify-staging"
route = "staging.janua.dev/api/v1/verify*"
vars = { ENVIRONMENT = "staging" }

[[kv_namespaces]]
binding = "JWKS_CACHE"
id = "jwks_cache_production"
preview_id = "jwks_cache_preview"

[[durable_objects.bindings]]
name = "RATE_LIMITER"
class_name = "RateLimiter"

[[migrations]]
tag = "v1"
new_classes = ["RateLimiter"]